<div data-uib-accordion>
  <div data-ng-repeat="(list, types) in army.lists" data-uib-accordion-group data-is-open="$first" data-panel-class="panel-primary">
    <div data-ng-if="list === 'Core List'">
      <div data-uib-accordion-heading>{{list}}</div>

      <div data-uib-accordion>
        <div data-ng-repeat="(type, numbers) in types" data-uib-accordion-group data-is-open="$first" data-panel-class="panel-primary" data-wok-type="type">
          <div data-uib-accordion-heading>
            {{type}}
            <span class="pull-right">({{ranks}}<span data-ng-if="army.gameSize !== 'Custom'">/{{gameSizes[army.gameSize][type]}}</span>)</span>
          </div>

          <div class="model" data-ng-repeat="model in models[type]" data-wok-model="model" data-number="numbers[$index]">{{model.name}}</div>
        </div>
      </div>
    </div>

    <div data-ng-if="list !== 'Core List'" data-wok-option-list>
      <div data-uib-accordion-heading>
        {{list}}
        <span class="pull-right">({{options | optionsFilter}}/{{gameSizes[army.gameSize].Options | optionsFilter}})</span>
      </div>

      <div data-uib-accordion>
        <div data-ng-repeat="(type, numbers) in types" data-uib-accordion-group data-heading="{{type}}" data-is-open="$first" data-panel-class="panel-primary">
          <div class="model" data-ng-repeat="model in models[type]" data-wok-model="model" data-number="numbers[$index]">{{model.name}}</div>
        </div>
      </div>
    </div>
  </div>
</div>